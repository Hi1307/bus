<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<meta name="description" content="See Tow Bus">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#FFFFFF">
<link rel="apple-touch-icon" href="https://i.imgur.com/9tVaenz.png">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<script>
  var OneSignal = window.OneSignal || [];
  OneSignal.push(function() {
    OneSignal.init({
      appId: "b019c6f8-fd71-4f16-835b-0a755e2c29ea",
    });
  });
</script>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9218984794093639",
    enable_page_level_ads: true
  });
</script>
<script>
function goBack() {
    window.history.back();
}
</script>
<style type="text/css">
.instagram-media{
  margin: 15px auto !important;
}
.red-bg {
    background-color: #7CFC00;
}
body {
font-family: "San Francisco", "Helvetica Neue", "Nunito"
}
footer {
    bottom: 0;
}
.button109 {
    background-color: #4CAF50; /* Green */
    border: none;
    color: white;
    padding: 5px 10px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
}
input[type=submit]:hover {
    background-color: blue;
}
#topbar{
width: 100%;
height: 300px;
overflow:scroll;
}
      #map {
        height: 600px;
      }
      #info-box {
        background-color: white;
        border: 1px solid black;
        top: 150px;
        height: 40px;
        padding: 10px;
        position: absolute;
        left: 30px;
        width: 200px;
      }

    @media (prefers-color-scheme: dark) {
      body{
        background-color: #333;
        color: white !important;
      }
      button, input, optgroup, select, textarea {
        color: white !important;
      }
      .input-field label {
        color: white;
      }
    }
</style>
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#edeff5",
      "text": "#838391"
    },
    "button": {
      "background": "#4b81e8"
    }
  },
  "theme": "classic",
  "position": "bottom-left",
  "content": {
    "message": "See Tow Bus uses cookies to ensure you get the best experience on our website."
  }
})});
</script>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>See Tow Bus v3 (Beta)</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://rawcdn.githack.com/Hi1307/ltabus/b896c394/flaticon.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
</head>
<body>


  <div class="container">
    <div class="section">

      <!--   Icon Section   -->
      <div class="row">
<h3 class="center">
See Tow Bus v3 (Beta)
</h3>
      <div class="card blue-grey darken-1">
        <div class="card-content white-text">
          <span class="card-title">Oops! Something went wrong.</span>
          <p>Google, being the eternal daddy that they are, dictated that Google Maps should now require a credit card. Henceforth See Tow Bus will be using OpenStreetMap for mapping. I'll think of a solution for streetview soon but as for now we have no streetview.</p>
        </div>
      </div>
<meta name="viewport" content="width=device-width, initial-scale=1">
<p class="center">At See Tow Bus, we recognise that your time is precious. That's why we put extra effort into making our bus arrival times more accurate, and why See Tow Bus has <b>1 decimal place</b> bus arrival times, with some routes getting 2 decimal places!</p>
<p class="center">Stop second guessing when your bus arrives. With our competitors, they only refresh every 1 minute. See Tow Bus refreshes every <b>6 seconds</b>!</p>
<p class="center">Enter a bus stop ID to view the next buses</p>
        <div class="input-field col s6 offset-s3">
<form action="bus.php" method="POST">
          <input placeholder="Bus Stop ID (5 digits)" id="field1" name="field1" type="number">
<a class="waves-effect waves-light btn" onClick="javascript: redir(document.getElementById('field1').value)">Search</a>
</form>
</div>
                  <div class="input-field col s12">
<hr>
<h6>Bus stop map</h6>
<p>Click or tap on the red dots to show you the bus stop ID</p>
        <div id="map">
        </div>
        <div id="info-box">Find a bus stop!
        </div>

<div style="position:relative;padding-top:56.25%;">
<iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" frameborder="0" src="https://hi1307.carto.com/builder/ed1269dd-67ae-4d43-b63b-aa79bf283168/embed" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>
</div>

<div id="topbar">
<h6>Popular bus stops:</h6>
<a class="waves-effect waves-light btn red" id="btn1">ACS(I)</a>
<a class="waves-effect waves-light btn red" id="btn2">Opp ACS(I)</a>
<a class="waves-effect waves-light btn red" id="btn3">Opp Fairfield</a>
<a class="waves-effect waves-light btn red" id="btn4">Buona McDonald's</a>
<a class="waves-effect waves-light btn red" id="btn5">MGS (KAP)</a>
<a class="waves-effect waves-light btn red" id="btn6">Opp MGS (KAP)</a>
<a class="waves-effect waves-light btn red" id="btn7">Opp Bishan Station</a>
<a class="waves-effect waves-light btn red" id="btn8">NYGH/NJC Gate (towards TKK)</a>
<a class="waves-effect waves-light btn red" id="btn9">MacRitchie Reservoir</a>
<a class="waves-effect waves-light btn red" id="btn10">Nex (Serangoon Ctrl)</a>
<a class="waves-effect waves-light btn red" id="btn11">Opp Nex (Serangoon Ctrl)</a>
<a class="waves-effect waves-light btn red" id="btn12">Nex (Upp Paya Lebar Road)</a>
<a class="waves-effect waves-light btn red" id="btn13">Dover Stn (Towards AC)</a>
<a class="waves-effect waves-light btn red" id="btn14">Changi Airport</a>
<a class="waves-effect waves-light btn red" id="btn15">Bedok Mall (MRT)</a>
<a class="waves-effect waves-light btn red" id="btn16">Plaza Sing (Dhoby Ghaut)</a>
<a class="waves-effect waves-light btn red" id="btn17">VivoCity</a>
<a class="waves-effect waves-light btn red" id="btn18">Parkway Parade</a>
      </div>
    </div>
  </div>
 </div>
</div>
<script>
jQuery("#btn1").click(function () {
    $("#field1").val("19089");
});
$("#btn2").click(function () {
    $("#field1").val("19081");
});
$("#btn3").click(function () {
    $("#field1").val("18119");
});
$("#btn4").click(function () {
    $("#field1").val("11369");
});
$("#btn5").click(function () {
    $("#field1").val("42051");
});
$("#btn6").click(function () {
    $("#field1").val("42059");
});
$("#btn7").click(function () {
    $("#field1").val("53239");
});
$("#btn8").click(function () {
    $("#field1").val("41079");
});
$("#btn9").click(function () {
    $("#field1").val("51071");
});
$("#btn10").click(function () {
    $("#field1").val("66351");
});
$("#btn11").click(function () {
    $("#field1").val("66359");
});
$("#btn12").click(function () {
    $("#field1").val("62131");
});
$("#btn13").click(function () {
    $("#field1").val("19039");
});
$("#btn14").click(function () {
    $("#field1").val("95029");
});
$("#btn15").click(function () {
    $("#field1").val("84031");
});
$("#btn16").click(function () {
    $("#field1").val("08057");
});
$("#btn17").click(function () {
    $("#field1").val("14141");
});
$("#btn18").click(function () {
    $("#field1").val("92049");
});
</script>


  <footer class="page-footer black">

    <div class="footer-copyright">
      <div class="container">
      © 2014-<?php echo date("Y"); ?> <a class="orange-text text-lighten-3" href="https://seetow.me">See Tow.</a> All Rights Reserved.  <? echo $_SERVER["HTTP_CF_CONNECTING_IP"]; ?>
      <div id="google_translate_element"></div><script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en', includedLanguages: 'ja,ko,ms,ta,zh-CN', layout: google.translate.TranslateElement.FloatPosition.TOP_LEFT}, 'google_translate_element');
}
</script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<div id="outdated"></div>
      </div>
    </div>
  </footer>

  <!--  Scripts-->
  <script src="https://rawcdn.githack.com/Hi1307/epic-website/fbc9b31fb17e548df6a03ca793361c6e2d1dc676/templates/busapp.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
      $(document).ready(function(){
        $('.modal').modal();
      });
// Note: This example requires that you consent to location sharing when
// prompted by your browser. If you see the error "The Geolocation service
// failed.", it means you probably did not give permission for the browser to
// locate you.
      var map, infoWindow;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 1.290270, lng: 103.851959},
          restriction: {
            latLngBounds: {
              north: 1.506417,
              south: 1.199572,
              west: 103.552020,
              east: 104.058765,
            },
          },
          zoom: 17
        });
        map.data.loadGeoJson('https://rawcdn.githack.com/Hi1307/seetowcdn/6cb5b17532a03b09ec864e12b53accea125eede8/geojson.json');
        map.data.addListener('click', function(event) {
          busstopcode = event.feature.getProperty('busstopcode');
          description = event.feature.getProperty('description');
          document.getElementById('info-box').innerHTML = '<a href="https://bus.seetow.me/results?stop='+busstopcode+'">'+busstopcode+': '+description+'</a>'; });
        infoWindow = new google.maps.InfoWindow;
        // Try HTML5 geolocation.
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };
            infoWindow.setPosition(pos);
            infoWindow.setContent("You're here!");
            infoWindow.open(map);
            map.setCenter(pos);
          },
          function() {
            handleLocationError(true, infoWindow, map.getCenter());
          });
        } else {
      // Browser doesn't support Geolocation
          handleLocationError(false, infoWindow, map.getCenter());
        }
      }
      function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeolocation ?
          'Error: Why did you forsake us?' :
          'Error: Your browser doesn\'t support geolocation.');
        infoWindow.open(map);
      }

      function getCookie(name)
  {
    var re = new RegExp(name + "=([^;]+)");
    var value = re.exec(document.cookie);
    return (value != null) ? unescape(value[1]) : null;
  }

fav = getCookie("fav");
fav = fav.split(",")

for(i=1; i<fav.length; i++){
  stopno = fav[i]
  stopname = bus_dict[parseInt(stopno)]
  jQuery("#topbar").prepend('<a class="waves-effect waves-light btn brown" href="/resultsv3?stop='+stopno+'">'+stopname+'</a>')
}
jQuery("#topbar").prepend('<h6>Your favourite bus stops:</h6>')

function redir(code){
  window.location = 'https://bus.seetow.me/results?stop='+code
}

    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?callback=initMap"></script>
<script>
  M.AutoInit();
</script>


  </body>
</html>
